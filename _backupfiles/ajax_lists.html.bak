<table>
    <tbody>
    <empty name="list">
        <tr>
            <td class="no-data" align="center" axis="col0" colspan="50">
                <i class="fa fa-exclamation-circle"></i>没有符合条件的记录
            </td>
        </tr>
        <else/>
        <volist name="list" id="list">
            <tr>
                <td align="center" axis="col0">
                    <div style="width: 50px;">                  
                        {$list.id}
                    </div>
                </td>                
                <td align="center" axis="col0">
                    <div style="text-align: left; width: 150px;">{:getnickname($list.user_id)}</div>
                </td>
                <td align="center" axis="col0">
                    <div style="text-align: left; width: 250px;">{:getmobile($list.user_id)}({$list.user_id},{:getUserName($list['user_id'])})</div>
                </td>
                <td align="center" axis="col0">
                    <div style="text-align: center; width: 100px;">{$list.num}</div>
                </td>
                <td align="center" axis="col0">
                    <div style="text-align: center; width: 100px;">{$list.price}</div>
                </td>
                <td align="center" axis="col0">
                    <div style="text-align: center; width: 100px;">{$list.surplus_num}</div>
                </td>
                <td align="center" axis="col0">
                    <div style="text-align: center; width: 100px;">{$list.money}</div>
                </td>
                <td align="center" axis="col0">
                    <div style="text-align: center; width: 100px;" class="state{$list.id}"><if condition="$list.is_complete eq 1"> 已完成 <elseif condition="$list.is_cancel eq 1" /> 已撤单 <else/>未完成</if></div>
                </td>
                <td align="center" axis="col0">
                    <div style="text-align: center; width: 200px;">{$list.add_time|date="Y-m-d H:i:s",###}
                        </div>
                </td>
                <td align="center" axis="col0">
                    <div style="text-align: center; width: 200px;" class="operation{$list.id}"><if condition="$list.is_complete neq 1 and $list.is_cancel neq 1"><a href="javascript:;" class="btn blue" onclick="cancel({$list.id}, this)"><i class="fa fa-pencil-square-o"></i>撤单</a></if>
                    </div>
                </td>
                <td align="" class="" style="width: 100%;">
                              <div>&nbsp;</div>
<!--                    <div style="text-align: center; width: 100px;">
                        <a class="btn blue" href=javascript:void(0);" onclick="takeoff(this)"><i class="fa fa-search"></i>查看</a>
                    </div>-->
                </td>
            </tr>
        </volist>          

    </empty>
</tbody>
</table>
<!--分页位置--> {$page}
<script>
    // 点击分页触发的事件
    $(".pagination  a").click(function() {
        cur_page = $(this).data('p');
        ajax_get_table('search-form2', cur_page);
    });
    function cancel(id,_this) {
        $.ajax({
            type:'post',
            dataType: 'json',
            url: `/index.php?m=Admin&c=Transaction&a=cancel&id=${id}`,
            success:function (res) {
                layer.msg(res.msg, {
                    icon: 1,
                    time: 1000
                }, function () {
                });
                if (1 == res.status) {
                    $(_this).css('display', 'none');
                }
            }
        })
    }
</script>        
